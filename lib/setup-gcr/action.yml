name: Setup GCR
description: Sets up Google Container Registry for later use
inputs:
  project:
    description: The GCP project to target
    required: false
    default: t0-prod
  project_id_number:
    description: The GCP project id to target
    required: true
runs:
  using: composite
  steps:
  - name: Authenticate with GCP
    uses: google-github-actions/auth@v0
    with:
      workload_identity_provider: "projects/${{inputs.project_id_number}}/locations/global/workloadIdentityPools/github/providers/github-provider"
      service_account: "github-actions@${{inputs.project}}.iam.gserviceaccount.com"
      token_format: access_token
  - name: Setup Google Cloud
    uses: google-github-actions/setup-gcloud@v0
  - name: Setup Docker
    shell: bash
    run: gcloud auth configure-docker
